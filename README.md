# Re-Sender-bot
Этот скрипт Python является телеграм-ботом, который подключается к почтовому ящику пользователя через IMAP, позволяя пересылать письма и взаимодействовать с ними через бота Telegram.
# Основные компоненты программы
## Импорт библиотек
```
telebot: для работы с Telegram API. 
imaplib, email: для работы с протоколом IMAP и обработки электронных писем. 
schedule, time: для планирования и выполнения задач. 
sqlite3: для работы с базой данных SQLite. 
```

## Настройки и переменные
  - TOKEN: токен Telegram-бота. 
  - IMAP_SERVER: сервер IMAP (в примере используется imap.mail.ru). 
  - fl: переменная-флаг для управления состоянием подключения. 
  - Создание таблицы в базе данных SQLite для хранения данных пользователей. 

## Бот Telegram
  - Обработка команды `/start` для начала работы с ботом. 
  - Функции next_step, handle_email_password, handle_user_choice, disable_email_forwarding для взаимодействия с пользователем и управления подключением к почте. 

## Работа с почтовым ящиком
  - connect_to_mail: функция для подключения к почтовому ящику через IMAP. 
  - fetch_emails: функция для получения и обработки писем из почтового ящика. 
  - Функции для показа последних писем и их отправки в Telegram.

## Планировщик и фоновые задачи
  - send_email_updates: отправка новых писем в Telegram для подключенных пользователей. 
  - keep_mail_connection_alive: поддержание активного соединения с почтовым ящиком через отправку NOOP команды. 

# Запуск и выполнение
Основной поток запускает бота Telegram (telegram_bot_polling), функцию поддержания соединения с почтой (keep_mail_connection_alive) и планировщик задач (start_scheduler). 

## Как это работает 
  - Пользователь подключает свою почту через бота, указывая адрес и пароль для внешних приложений. 
  - Бот использует IMAP для доступа к письмам на сервере. 
  - Пользователь может выбирать опции для просмотра последних отправленных и входящих писем или отключения пересылки. 
  - При получении новых писем, бот автоматически отправляет их пользователю в Telegram. 
  - Планировщик регулярно проверяет почтовый ящик на наличие новых писем и уведомляет пользователя при их поступлении. 
  - Этот скрипт полезен для автоматизации работы с электронной почтой через Telegram, обеспечивая удобство и оперативность взаимодействия с почтовыми уведомлениями.
